# 計算機科学実験及演習4 データベース 課題3
#### 1029259152 田中 勝也
## 課題２で求めた従属性集合に基づいて，関係スキーマを設計しなさい．どのような正規形が得られたかを説明すること．

今回は以下のER図から関係スキーマを抽出する.

![ER図](./entity-relation.png)

考えられる関数従属性は以下のとおり.

- スレッドID $\rightarrow$ タイトル
- 問題ID $\rightarrow$ インデックス
- 問題ID $\rightarrow$ 問題文
- 問題ID $\rightarrow$ 答え
- 問題ID $\rightarrow$ リクエスト？
- 問題文 $\rightarrow$ 答え
- リクエストID $\rightarrow$ インデックス
- コメントID $\rightarrow$ インデックス
- コメントID $\rightarrow$ 本文
- ユーザID(問題作成者) $\cup$ スレッドID $\rightarrow$ 時刻(作成)
- ユーザID(問題作成者) $\cup$ リクエストID $\rightarrow$ 時刻(受理/拒否)
- ユーザID(問題作成者) $\cup$ コメントID $\rightarrow$ 時刻(コメントする)
- ユーザID(解答者) $\cup$ リクエストID $\rightarrow$ 時刻(送る)
- ユーザID(解答者) $\cup$ コメントID $\rightarrow$ 時刻(コメントする)

考えられる多値従属性は

- ユーザID(解答者) \rightarrow\rightarrow ユーザID(問題作成者) | スレッドID

などがある.

これらの従属性集合から以下のような関係スキーマを設計した.

- スレッド(\underbar{スレッドID}, タイトル)
- 問題(\underbar{問題ID}, 問題文, インデックス, リクエスト?)
- 問題情報(\underbar{問題文}, 答え)
- コメント(\underbar{コメントID}, インデックス, 本文)

- スレッド作成(\underbar{ユーザID}, \underbar{スレッドID}, 時刻)
- コメントする(\underbar{ユーザID}, \underbar{コメントID}, 時刻)
- リクエスト-コメント(\underbar{リクエストID}, \underbar{コメントID})
- スレッド-リクエスト(\underbar{スレッドID}, \underbar{リクエストID})
- スレッド-問題(\underbar{スレッドID}, \underbar{問題ID})
- リクエストする(\underbar{ユーザID}, \underbar{リクエストID})

基本的にはER図からそのまま実体, 関連についてのスキーマを設計したが,
"問題"について, ここでは問題文に対して答えが一意に定まるような問題を扱うことを
想定しているため, 問題文 \rightarrow 答え という関数従属性が存在する.
したがって, 問題ID をキーとする"問題"という関係と, 
問題文をキーとする"問題情報"という関係に分割した.  
また, ER図中で実体として示していた "問題作成者", "解答者", "リクエスト"
について, 属性が一つの実体とするよりも, 他の実体や関連の属性としてマージしたほうがよいという指摘を受けたのでそのように変更した.  
これにより, 全ての関係で, 関数従属性 X \to Y が存在するなら, X は関係の超キーとなり, BCNFにまで正規化された.
